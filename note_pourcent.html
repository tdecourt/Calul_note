<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcul pourcentage et note dictée</title>
</head>

<body>
    <section style="display: flex; flex-direction: column; align-items: center; font-family: sans-serif; font-size: 150%;">
        <h1 style="font-size: 250%;">Calcul pourcentage</h1>
        <form style="display: grid; grid-template-columns: repeat(5, 1fr); grid-gap: 50px;">
            <p style="grid-column: 1 / 3; align-self: center; justify-self: center;">Nombre de questions </p>
            <input type="range" min="1" step="1" value="1" max="50" class="maxPourcent" style="grid-column: 3 / 5; align-self: center; justify-self: center; width: 100%;">
            <input type="number" min="1" step="1" value="1" max="50" class="maxPourcent" style="align-self: center; justify-self: center; font-size: 1em; width: 50%; height: 50px;">
            <p style="grid-column: 1 / 3; align-self: center; justify-self: center;">Nombre de bonnes réponses </p>
            <input type="range" min="0" step="1" value="1" max="1" class="nbBonneRep" style="grid-column: 3 / 5; align-self: center; justify-self: center; width: 100%;">
            <input type="number" min="0" step="1" value="1" max="1" class="nbBonneRep" style="align-self: center; justify-self: center; font-size: 1em; width: 50%; height: 50px;">
        </form>
        <p>Pourcentage : <span id="resPourcentage">100%</span></p>
    </section>
</body>

<script type="text/javascript">
    let maxPourcent = document.getElementsByClassName('maxPourcent');
    let nbBonneRep = document.getElementsByClassName('nbBonneRep');
    let resPourcentage = document.getElementById('resPourcentage')

    function prcnt(evt) {
        let value = evt.target.value;
        for (let i = 0; i < document.getElementsByClassName(evt.target.className).length; i++) {
            const elem = document.getElementsByClassName(evt.target.className)[i];
            elem.value = value;
            if (evt.target.className == 'maxPourcent') {
                if (nbBonneRep[i].value > value) nbBonneRep[i].value = value;
                nbBonneRep[i].max = value;
            }
        }
        resPourcentage.innerText = (nbBonneRep[0].value * 100 / maxPourcent[0].value).toFixed(0) + "%";
    }

    maxPourcent[0].addEventListener('input', prcnt, false);
    maxPourcent[1].addEventListener('input', prcnt, false);
    nbBonneRep[0].addEventListener('input', prcnt, false);
    nbBonneRep[1].addEventListener('input', prcnt, false);
</script>

</html>